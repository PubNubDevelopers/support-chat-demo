{"ast":null,"code":"import store from './store';\nvar DEFAULTS = ['+1', 'grinning', 'kissing_heart', 'heart_eyes', 'laughing', 'stuck_out_tongue_winking_eye', 'sweat_smile', 'joy', 'scream', 'disappointed', 'unamused', 'weary', 'sob', 'sunglasses', 'heart', 'poop'];\nvar frequently, initialized;\nvar defaults = {};\n\nfunction init() {\n  initialized = true;\n  frequently = store.get('frequently');\n}\n\nfunction add(emoji) {\n  if (!initialized) init();\n  var id = emoji.id;\n  frequently || (frequently = defaults);\n  frequently[id] || (frequently[id] = 0);\n  frequently[id] += 1;\n  store.set('last', id);\n  store.set('frequently', frequently);\n}\n\nfunction get(perLine) {\n  if (!initialized) init();\n\n  if (!frequently) {\n    defaults = {};\n    var result = [];\n\n    for (var i = 0; i < perLine; i++) {\n      defaults[DEFAULTS[i]] = perLine - i;\n      result.push(DEFAULTS[i]);\n    }\n\n    return result;\n  }\n\n  var quantity = perLine * 4;\n  var frequentlyKeys = [];\n\n  for (var key in frequently) {\n    if (frequently.hasOwnProperty(key)) {\n      frequentlyKeys.push(key);\n    }\n  }\n\n  var sorted = frequentlyKeys.sort(function (a, b) {\n    return frequently[a] - frequently[b];\n  }).reverse();\n  var sliced = sorted.slice(0, quantity);\n  var last = store.get('last');\n\n  if (last && sliced.indexOf(last) == -1) {\n    sliced.pop();\n    sliced.push(last);\n  }\n\n  return sliced;\n}\n\nexport default {\n  add: add,\n  get: get\n};","map":{"version":3,"sources":["/Users/chandler/Desktop/121-chat/support-chat-demo/client/node_modules/emoji-mart/dist-es/utils/frequently.js"],"names":["store","DEFAULTS","frequently","initialized","defaults","init","get","add","emoji","id","set","perLine","result","i","push","quantity","frequentlyKeys","key","hasOwnProperty","sorted","sort","a","b","reverse","sliced","slice","last","indexOf","pop"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,IAAIC,QAAQ,GAAG,CAAC,IAAD,EAAO,UAAP,EAAmB,eAAnB,EAAoC,YAApC,EAAkD,UAAlD,EAA8D,8BAA9D,EAA8F,aAA9F,EAA6G,KAA7G,EAAoH,QAApH,EAA8H,cAA9H,EAA8I,UAA9I,EAA0J,OAA1J,EAAmK,KAAnK,EAA0K,YAA1K,EAAwL,OAAxL,EAAiM,MAAjM,CAAf;AACA,IAAIC,UAAJ,EAAgBC,WAAhB;AACA,IAAIC,QAAQ,GAAG,EAAf;;AAEA,SAASC,IAAT,GAAgB;AACdF,EAAAA,WAAW,GAAG,IAAd;AACAD,EAAAA,UAAU,GAAGF,KAAK,CAACM,GAAN,CAAU,YAAV,CAAb;AACD;;AAED,SAASC,GAAT,CAAaC,KAAb,EAAoB;AAClB,MAAI,CAACL,WAAL,EAAkBE,IAAI;AACtB,MAAII,EAAE,GAAGD,KAAK,CAACC,EAAf;AACAP,EAAAA,UAAU,KAAKA,UAAU,GAAGE,QAAlB,CAAV;AACAF,EAAAA,UAAU,CAACO,EAAD,CAAV,KAAmBP,UAAU,CAACO,EAAD,CAAV,GAAiB,CAApC;AACAP,EAAAA,UAAU,CAACO,EAAD,CAAV,IAAkB,CAAlB;AACAT,EAAAA,KAAK,CAACU,GAAN,CAAU,MAAV,EAAkBD,EAAlB;AACAT,EAAAA,KAAK,CAACU,GAAN,CAAU,YAAV,EAAwBR,UAAxB;AACD;;AAED,SAASI,GAAT,CAAaK,OAAb,EAAsB;AACpB,MAAI,CAACR,WAAL,EAAkBE,IAAI;;AAEtB,MAAI,CAACH,UAAL,EAAiB;AACfE,IAAAA,QAAQ,GAAG,EAAX;AACA,QAAIQ,MAAM,GAAG,EAAb;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAApB,EAA6BE,CAAC,EAA9B,EAAkC;AAChCT,MAAAA,QAAQ,CAACH,QAAQ,CAACY,CAAD,CAAT,CAAR,GAAwBF,OAAO,GAAGE,CAAlC;AACAD,MAAAA,MAAM,CAACE,IAAP,CAAYb,QAAQ,CAACY,CAAD,CAApB;AACD;;AAED,WAAOD,MAAP;AACD;;AAED,MAAIG,QAAQ,GAAGJ,OAAO,GAAG,CAAzB;AACA,MAAIK,cAAc,GAAG,EAArB;;AAEA,OAAK,IAAIC,GAAT,IAAgBf,UAAhB,EAA4B;AAC1B,QAAIA,UAAU,CAACgB,cAAX,CAA0BD,GAA1B,CAAJ,EAAoC;AAClCD,MAAAA,cAAc,CAACF,IAAf,CAAoBG,GAApB;AACD;AACF;;AAED,MAAIE,MAAM,GAAGH,cAAc,CAACI,IAAf,CAAoB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC/C,WAAOpB,UAAU,CAACmB,CAAD,CAAV,GAAgBnB,UAAU,CAACoB,CAAD,CAAjC;AACD,GAFY,EAEVC,OAFU,EAAb;AAGA,MAAIC,MAAM,GAAGL,MAAM,CAACM,KAAP,CAAa,CAAb,EAAgBV,QAAhB,CAAb;AACA,MAAIW,IAAI,GAAG1B,KAAK,CAACM,GAAN,CAAU,MAAV,CAAX;;AAEA,MAAIoB,IAAI,IAAIF,MAAM,CAACG,OAAP,CAAeD,IAAf,KAAwB,CAAC,CAArC,EAAwC;AACtCF,IAAAA,MAAM,CAACI,GAAP;AACAJ,IAAAA,MAAM,CAACV,IAAP,CAAYY,IAAZ;AACD;;AAED,SAAOF,MAAP;AACD;;AAED,eAAe;AACbjB,EAAAA,GAAG,EAAEA,GADQ;AAEbD,EAAAA,GAAG,EAAEA;AAFQ,CAAf","sourcesContent":["import store from './store';\nvar DEFAULTS = ['+1', 'grinning', 'kissing_heart', 'heart_eyes', 'laughing', 'stuck_out_tongue_winking_eye', 'sweat_smile', 'joy', 'scream', 'disappointed', 'unamused', 'weary', 'sob', 'sunglasses', 'heart', 'poop'];\nvar frequently, initialized;\nvar defaults = {};\n\nfunction init() {\n  initialized = true;\n  frequently = store.get('frequently');\n}\n\nfunction add(emoji) {\n  if (!initialized) init();\n  var id = emoji.id;\n  frequently || (frequently = defaults);\n  frequently[id] || (frequently[id] = 0);\n  frequently[id] += 1;\n  store.set('last', id);\n  store.set('frequently', frequently);\n}\n\nfunction get(perLine) {\n  if (!initialized) init();\n\n  if (!frequently) {\n    defaults = {};\n    var result = [];\n\n    for (var i = 0; i < perLine; i++) {\n      defaults[DEFAULTS[i]] = perLine - i;\n      result.push(DEFAULTS[i]);\n    }\n\n    return result;\n  }\n\n  var quantity = perLine * 4;\n  var frequentlyKeys = [];\n\n  for (var key in frequently) {\n    if (frequently.hasOwnProperty(key)) {\n      frequentlyKeys.push(key);\n    }\n  }\n\n  var sorted = frequentlyKeys.sort(function (a, b) {\n    return frequently[a] - frequently[b];\n  }).reverse();\n  var sliced = sorted.slice(0, quantity);\n  var last = store.get('last');\n\n  if (last && sliced.indexOf(last) == -1) {\n    sliced.pop();\n    sliced.push(last);\n  }\n\n  return sliced;\n}\n\nexport default {\n  add: add,\n  get: get\n};"]},"metadata":{},"sourceType":"module"}