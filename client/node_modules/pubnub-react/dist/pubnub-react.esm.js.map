{"version":3,"file":"pubnub-react.esm.js","sources":["../src/context/PubNubContext.tsx","../src/context/PubNubProvider.tsx","../src/context/PubNubConsumer.tsx","../src/hooks/usePubNub.ts"],"sourcesContent":["import React from 'react';\nimport PubNub from 'pubnub';\n\nexport interface PubNubContextValue {\n  client: PubNub;\n}\n\nexport const PubNubContext = React.createContext<PubNubContextValue | null>(\n  null\n);\n","import React from 'react';\nimport PubNub from 'pubnub';\nimport invariant from 'ts-invariant';\n\nimport { PubNubContext } from './PubNubContext';\n\nexport interface PubNubProviderProps<PubNubInstance> {\n  client: PubNubInstance;\n  children: React.ReactNode | React.ReactNode[] | null;\n}\n\nfunction appendPnsdk(pubnub: any) {\n  if (typeof pubnub._addPnsdkSuffix === 'function') {\n    pubnub._addPnsdkSuffix('React/__VERSION__');\n  }\n}\n\nexport const PubNubProvider: React.FC<PubNubProviderProps<PubNub>> = ({\n  client,\n  children,\n}) => {\n  const contextValue = React.useMemo(() => {\n    return { client };\n  }, [client]);\n\n  invariant(\n    contextValue.client,\n    'PubNubProvider was not passed a client instance. Make ' +\n      'sure you pass in your client via the \"client\" prop.'\n  );\n\n  React.useEffect(() => {\n    appendPnsdk(contextValue.client);\n  }, []);\n\n  return (\n    <PubNubContext.Provider value={contextValue}>\n      {children}\n    </PubNubContext.Provider>\n  );\n};\n","import React from 'react';\nimport PubNub from 'pubnub';\nimport invariant from 'ts-invariant';\n\nimport { PubNubContext } from './PubNubContext';\n\nexport interface PubNubConsumerProps {\n  children: (client: PubNub) => React.ReactChild | null;\n}\n\nexport const PubNubConsumer: React.FC<PubNubConsumerProps> = ({ children }) => {\n  const context = React.useContext(PubNubContext);\n\n  invariant(\n    context && context.client,\n    'Could not find \"client\" in the context of PubNubConsumer. ' +\n      'Wrap the root component in an <PubNubProvider>.'\n  );\n\n  return <>{children(context!.client)}</>;\n};\n","import { useContext } from 'react';\nimport PubNub from 'pubnub';\nimport invariant from 'ts-invariant';\n\nimport { PubNubContext } from '../context/PubNubContext';\n\nexport function usePubNub(): PubNub {\n  const context = useContext(PubNubContext);\n\n  invariant(\n    context && context.client,\n    'No PubNub Client instance can be found. Please ensure that you ' +\n      'have called `PubNubProvider` higher up in your tree.'\n  );\n\n  return context!.client;\n}\n"],"names":["PubNubContext","React","createContext","appendPnsdk","pubnub","_addPnsdkSuffix","PubNubProvider","client","children","contextValue","useMemo","invariant","useEffect","Provider","value","PubNubConsumer","context","useContext","usePubNub"],"mappings":";;;AAOO,IAAMA,aAAa;;AAAGC,KAAK,CAACC,aAAN,CAC3B,IAD2B,CAAtB;;ACIP,SAASC,WAAT,CAAqBC,MAArB;MACM,OAAOA,MAAM,CAACC,eAAd,KAAkC,UAAtC,EAAkD;IAChDD,MAAM,CAACC,eAAP,CAAuB,aAAvB;;;;AAIJ,IAAaC,cAAc,GAA0C,SAAxDA,cAAwD;MACnEC,cAAAA;MACAC,gBAAAA;MAEMC,YAAY,GAAGR,KAAK,CAACS,OAAN,CAAc;WAC1B;MAAEH,MAAM,EAANA;KAAT;GADmB,EAElB,CAACA,MAAD,CAFkB,CAArB;GAKEE,YAAY,CAACF,MADf,2CAAAI,SAAS,QAEP,2DACE,qDAHK,CAAT,GAAAA,SAAS,OAAT;EAMAV,KAAK,CAACW,SAAN,CAAgB;IACdT,WAAW,CAACM,YAAY,CAACF,MAAd,CAAX;GADF,EAEG,EAFH;SAKEN,mBAAA,CAACD,aAAa,CAACa,QAAf;IAAwBC,KAAK,EAAEL;GAA/B,EACGD,QADH,CADF;CAlBK;;ICPMO,cAAc,GAAkC,SAAhDA,cAAgD;MAAGP,gBAAAA;MACxDQ,OAAO,GAAGf,KAAK,CAACgB,UAAN,CAAiBjB,aAAjB,CAAhB;IAGEgB,OAAO,IAAIA,OAAO,CAACT,MADrB,4CAAAI,SAAS,QAEP,+DACE,iDAHK,CAAT,GAAAA,SAAS,OAAT;SAMOV,mBAAA,eAAA,MAAA,EAAGO,QAAQ,CAACQ,OAAQ,CAACT,MAAV,CAAX,CAAP;CATK;;SCJSW;MACRF,OAAO,GAAGC,UAAU,CAACjB,aAAD,CAA1B;IAGEgB,OAAO,IAAIA,OAAO,CAACT,MADrB,4CAAAI,SAAS,QAEP,oEACE,sDAHK,CAAT,GAAAA,SAAS,OAAT;SAMOK,OAAQ,CAACT,MAAhB;;;;;"}