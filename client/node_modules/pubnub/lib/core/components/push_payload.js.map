{"version":3,"sources":["core/components/push_payload.js"],"names":["BaseNotificationPayload","_payload","value","_title","_subtitle","_body","_badge","_sound","payload","title","body","_setDefaultPayloadStructure","APNSNotificationPayload","aps","alert","_isSilent","_apnsPushType","_configurations","length","ReferenceError","configurations","forEach","configuration","push","_objectFromAPNS2Configuration","pn_push","Object","keys","badge","sound","targets","target","_objectFromAPNSTarget","collapseId","expirationDate","objectifiedConfiguration","auth_method","version","collapse_id","expiration","toISOString","topic","TypeError","environment","excludedDevices","objectifiedTarget","excluded_devices","subtitle","undefined","MPNSNotificationPayload","_backContent","back_content","_backTitle","back_title","_count","count","_type","type","backTitle","backContent","FCMNotificationPayload","notification","data","initialNotification","initialData","additionalData","_icon","icon","_tag","tag","NotificationsPayload","_debugging","apns","mpns","fcm","platforms","includes","apnsPayload","toObject","pn_apns","mpnsPayload","pn_mpns","fcmPayload","pn_gcm","pn_debug"],"mappings":"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","sourcesContent":["/* @flow */\n/* eslint max-classes-per-file: [\"error\", 5] */\nimport { APNS2Configuration, APNS2Target } from '../flow_interfaces';\n\nclass BaseNotificationPayload {\n  _subtitle: ?string;\n  _payload: Object;\n  _badge: ?number;\n  _sound: ?string;\n  _title: ?string;\n  _body: ?string;\n\n  get payload() {\n    return this._payload;\n  }\n\n  set title(value: ?string) {\n    this._title = value;\n  }\n\n  set subtitle(value: ?string) {\n    this._subtitle = value;\n  }\n\n  set body(value: ?string) {\n    this._body = value;\n  }\n\n  set badge(value: ?number) {\n    this._badge = value;\n  }\n\n  set sound(value: ?string) {\n    this._sound = value;\n  }\n\n  constructor(payload: Object, title: ?string, body: ?string) {\n    this._payload = payload;\n\n    this._setDefaultPayloadStructure();\n    this.title = title;\n    this.body = body;\n  }\n\n  _setDefaultPayloadStructure() {\n  }\n\n  toObject() {\n    return {};\n  }\n}\n\nexport class APNSNotificationPayload extends BaseNotificationPayload {\n  _configurations: Array<APNS2Configuration>;\n  _apnsPushType: ?string;\n  _isSilent: boolean;\n\n  set configurations(value: Array<APNS2Configuration>) {\n    if (!value || !value.length) return;\n\n    this._configurations = value;\n  }\n\n  get notification() {\n    return this._payload.aps;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.aps.alert.title = value;\n    this._title = value;\n  }\n\n  get subtitle() {\n    return this._subtitle;\n  }\n\n  set subtitle(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.aps.alert.subtitle = value;\n    this._subtitle = value;\n  }\n\n  get body() {\n    return this._body;\n  }\n\n  set body(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.aps.alert.body = value;\n    this._body = value;\n  }\n\n  get badge() {\n    return this._badge;\n  }\n\n  set badge(value: ?number) {\n    if (value === undefined || value === null) return;\n\n    this._payload.aps.badge = value;\n    this._badge = value;\n  }\n\n  get sound() {\n    return this._sound;\n  }\n\n  set sound(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.aps.sound = value;\n    this._sound = value;\n  }\n\n  set silent(value: boolean) {\n    this._isSilent = value;\n  }\n\n  _setDefaultPayloadStructure() {\n    this._payload.aps = { alert: {} };\n  }\n\n  toObject(): ?Object {\n    let payload = { ...this._payload };\n    /** @type {{alert: Object, badge: number, sound: string}} */\n    let aps = payload.aps;\n    let alert = aps.alert;\n\n    if (this._isSilent) {\n      aps['content-available'] = 1;\n    }\n\n    if (this._apnsPushType === 'apns2') {\n      if (!this._configurations || !this._configurations.length) {\n        throw new ReferenceError('APNS2 configuration is missing');\n      }\n\n      let configurations = [];\n      this._configurations.forEach((configuration: APNS2Configuration) => {\n        configurations.push(this._objectFromAPNS2Configuration(configuration));\n      });\n\n      if (configurations.length) {\n        payload.pn_push = configurations;\n      }\n    }\n\n    if (!alert || !Object.keys(alert).length) {\n      delete aps.alert;\n    }\n\n    if (this._isSilent) {\n      delete aps.alert;\n      delete aps.badge;\n      delete aps.sound;\n      alert = {};\n    }\n\n    return this._isSilent || Object.keys(alert).length ? payload : null;\n  }\n\n  _objectFromAPNS2Configuration(configuration: APNS2Configuration) {\n    if (!configuration.targets || !configuration.targets.length) {\n      throw new ReferenceError('At least one APNS2 target should be provided');\n    }\n\n    let targets = [];\n    configuration.targets.forEach((target: APNS2Target) => {\n      targets.push(this._objectFromAPNSTarget(target));\n    });\n\n    const { collapseId, expirationDate } = configuration;\n    let objectifiedConfiguration: {\n      auth_method: string,\n      targets: Array<Object>,\n      version: string,\n      collapse_id?: string,\n      expiration?: string\n    } = { auth_method: 'token', targets, version: 'v2' };\n\n    if (collapseId && collapseId.length) {\n      objectifiedConfiguration.collapse_id = collapseId;\n    }\n\n    if (expirationDate) {\n      objectifiedConfiguration.expiration = expirationDate.toISOString();\n    }\n\n    return objectifiedConfiguration;\n  }\n\n  _objectFromAPNSTarget(target: APNS2Target) {\n    if (!target.topic || !target.topic.length) {\n      throw new TypeError('Target \\'topic\\' undefined.');\n    }\n\n    const {\n      topic,\n      environment = 'development',\n      excludedDevices = []\n    } = target;\n\n    let objectifiedTarget: {\n      topic: string,\n      environment: string,\n      excluded_devices?: Array<string>\n    } = { topic, environment };\n\n    if (excludedDevices.length) {\n      objectifiedTarget.excluded_devices = excludedDevices;\n    }\n\n    return objectifiedTarget;\n  }\n}\n\nexport class MPNSNotificationPayload extends BaseNotificationPayload  {\n  _backContent: ?string;\n  _backTitle: ?string;\n  _count: ?number;\n  _type: ?string;\n\n  get backContent() {\n    return this._backContent;\n  }\n\n  set backContent(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.back_content = value;\n    this._backContent = value;\n  }\n\n  get backTitle() {\n    return this._backTitle;\n  }\n\n  set backTitle(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.back_title = value;\n    this._backTitle = value;\n  }\n\n  get count() {\n    return this._count;\n  }\n\n  set count(value: ?number) {\n    if (value === undefined || value === null) return;\n\n    this._payload.count = value;\n    this._count = value;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.title = value;\n    this._title = value;\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.type = value;\n    this._type = value;\n  }\n\n  get subtitle() {\n    return this.backTitle;\n  }\n\n  set subtitle(value: ?string) {\n    this.backTitle = value;\n  }\n\n  get body() {\n    return this.backContent;\n  }\n\n  set body(value: ?string) {\n    this.backContent = value;\n  }\n\n  get badge() {\n    return this.count;\n  }\n\n  set badge(value: ?number) {\n    this.count = value;\n  }\n\n  toObject(): ?Object {\n    return Object.keys(this._payload).length ? { ...this._payload } : null;\n  }\n}\n\nexport class FCMNotificationPayload extends BaseNotificationPayload  {\n  _isSilent: boolean;\n  _icon: ?string;\n  _tag: ?string;\n\n  get notification() {\n    return this._payload.notification;\n  }\n\n  get data() {\n    return this._payload.data;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.notification.title = value;\n    this._title = value;\n  }\n\n  get body() {\n    return this._body;\n  }\n\n  set body(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.notification.body = value;\n    this._body = value;\n  }\n\n  get sound() {\n    return this._sound;\n  }\n\n  set sound(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.notification.sound = value;\n    this._sound = value;\n  }\n\n  get icon() {\n    return this._icon;\n  }\n\n  set icon(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.notification.icon = value;\n    this._icon = value;\n  }\n\n  get tag() {\n    return this._tag;\n  }\n\n  set tag(value: ?string) {\n    if (!value || !value.length) return;\n\n    this._payload.notification.tag = value;\n    this._tag = value;\n  }\n\n  set silent(value: boolean) {\n    this._isSilent = value;\n  }\n\n  _setDefaultPayloadStructure() {\n    this._payload.notification = {};\n    this._payload.data = {};\n  }\n\n  toObject(): ?Object {\n    let data = { ...this._payload.data };\n    let notification = null;\n    let payload = {};\n\n    /**\n     * Check whether additional data has been passed outside of 'data' object\n     * and put it into it if required.\n     */\n    if (Object.keys(this._payload).length > 2) {\n      let { notification: initialNotification, data: initialData, ...additionalData } = this._payload;\n\n      data = { ...data, ...additionalData };\n    }\n\n    if (this._isSilent) {\n      data.notification = this._payload.notification;\n    } else {\n      notification = this._payload.notification;\n    }\n\n    if (Object.keys(data).length) {\n      payload.data = data;\n    }\n\n    if (notification && Object.keys(notification).length) {\n      payload.notification = notification;\n    }\n\n    return Object.keys(payload).length ? payload : null;\n  }\n}\n\nclass NotificationsPayload {\n  _payload: {apns: Object, mpns: Object, fcm: Object};\n  _debugging: boolean;\n  _subtitle: ?string;\n  _badge: ?number;\n  _sound: ?string;\n  _title: ?string;\n  _body: ?string;\n  apns: APNSNotificationPayload;\n  mpns: MPNSNotificationPayload;\n  fcm: FCMNotificationPayload;\n\n  set debugging(value: boolean) {\n    this._debugging = value;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  get body() {\n    return this._body;\n  }\n\n  get subtitle() {\n    return this._subtitle;\n  }\n\n  set subtitle(value: ?string) {\n    this._subtitle = value;\n    this.apns.subtitle = value;\n    this.mpns.subtitle = value;\n    this.fcm.subtitle = value;\n  }\n\n  get badge() {\n    return this._badge;\n  }\n\n  set badge(value: ?number) {\n    this._badge = value;\n    this.apns.badge = value;\n    this.mpns.badge = value;\n    this.fcm.badge = value;\n  }\n\n  get sound() {\n    return this._sound;\n  }\n\n  set sound(value: ?string) {\n    this._sound = value;\n    this.apns.sound = value;\n    this.mpns.sound = value;\n    this.fcm.sound = value;\n  }\n\n  constructor(title: ?string, body: ?string) {\n    this._payload = { apns: {}, mpns: {}, fcm: {} };\n    this._title = title;\n    this._body = body;\n\n    this.apns = new APNSNotificationPayload(this._payload.apns, title, body);\n    this.mpns = new MPNSNotificationPayload(this._payload.mpns, title, body);\n    this.fcm = new FCMNotificationPayload(this._payload.fcm, title, body);\n  }\n\n  /**\n   * Build notifications platform for requested platforms.\n   *\n   * @param {Array<string>} platforms - List of platforms for which payload\n   * should be added to final dictionary. Supported values: gcm, apns, apns2,\n   * mpns.\n   *\n   * @returns {Object} Object with data, which can be sent with publish method\n   * call and trigger remote notifications for specified platforms.\n   */\n  buildPayload(platforms: Array<string>) {\n    let payload = {};\n\n    if (platforms.includes('apns') || platforms.includes('apns2')) {\n      this.apns._apnsPushType = platforms.includes('apns') ? 'apns' : 'apns2';\n      let apnsPayload = this.apns.toObject();\n\n      if (apnsPayload && Object.keys(apnsPayload).length) {\n        payload.pn_apns = apnsPayload;\n      }\n    }\n\n    if (platforms.includes('mpns')) {\n      let mpnsPayload = this.mpns.toObject();\n\n      if (mpnsPayload && Object.keys(mpnsPayload).length) {\n        payload.pn_mpns = mpnsPayload;\n      }\n    }\n\n    if (platforms.includes('fcm')) {\n      let fcmPayload = this.fcm.toObject();\n\n      if (fcmPayload && Object.keys(fcmPayload).length) {\n        payload.pn_gcm = fcmPayload;\n      }\n    }\n\n    if (Object.keys(payload).length && this._debugging) {\n      payload.pn_debug = true;\n    }\n\n    return payload;\n  }\n}\n\nexport default NotificationsPayload;\n"],"file":"push_payload.js"}