{"version":3,"sources":["core/endpoints/users/get_user.js"],"names":["getOperation","operationConstants","PNGetUserOperation","validateParams","modules","incomingParams","userId","getURL","config","subscribeKey","getRequestTimeout","getTransactionTimeout","isAuthSupported","getAuthToken","token","tokenManager","getToken","prepareParams","include","params","customFields","undefined","includes","push","includesString","join","length","handleResponse","usersResponse"],"mappings":";;;;;;;;;;;;;;AAEA;;AAKA;;;;AAEO,SAASA,YAAT,GAAgC;AACrC,SAAOC,uBAAmBC,kBAA1B;AACD;;AAEM,SAASC,cAAT,CAAwBC,OAAxB,EAAgDC,cAAhD,EAAiF;AAAA,MAChFC,MADgF,GACrED,cADqE,CAChFC,MADgF;AAGtF,MAAI,CAACA,MAAL,EAAa,OAAO,gBAAP;AACd;;AAEM,SAASC,MAAT,CACLH,OADK,EAELC,cAFK,EAGG;AAAA,MACFG,MADE,GACSJ,OADT,CACFI,MADE;AAGR,+BAAsBA,MAAM,CAACC,YAA7B,oBAAmDJ,cAAc,CAACC,MAAlE;AACD;;AAEM,SAASI,iBAAT,OAAsD;AAAA,MAAzBF,MAAyB,QAAzBA,MAAyB;AAC3D,SAAOA,MAAM,CAACG,qBAAP,EAAP;AACD;;AAEM,SAASC,eAAT,GAA2B;AAChC,SAAO,IAAP;AACD;;AAEM,SAASC,YAAT,CAAsBT,OAAtB,EAA8CC,cAA9C,EAAuF;AAC5F,MAAIS,KAAK,GACPV,OAAO,CAACW,YAAR,CAAqBC,QAArB,CAA8B,MAA9B,EAAsCX,cAAc,CAACC,MAArD,KACAF,OAAO,CAACW,YAAR,CAAqBC,QAArB,CAA8B,MAA9B,CAFF;AAIA,SAAOF,KAAP;AACD;;AAEM,SAASG,aAAT,CACLb,OADK,EAELC,cAFK,EAGG;AAAA,MACFa,OADE,GACUb,cADV,CACFa,OADE;AAER,MAAMC,MAAM,GAAG,EAAf;;AAGA,MAAI,CAACD,OAAL,EAAc;AACZA,IAAAA,OAAO,GAAG;AACRE,MAAAA,YAAY,EAAE;AADN,KAAV;AAGD,GAJD,MAIO,IAAIF,OAAO,CAACE,YAAR,KAAyBC,SAA7B,EAAwC;AAC7CH,IAAAA,OAAO,CAACE,YAAR,GAAuB,IAAvB;AACD;;AAED,MAAIF,OAAJ,EAAa;AACX,QAAII,QAAQ,GAAG,EAAf;;AAEA,QAAIJ,OAAO,CAACE,YAAZ,EAA0B;AACxBE,MAAAA,QAAQ,CAACC,IAAT,CAAc,QAAd;AACD;;AAED,QAAIC,cAAc,GAAGF,QAAQ,CAACG,IAAT,CAAc,GAAd,CAArB;;AAEA,QAAID,cAAc,CAACE,MAAf,GAAwB,CAA5B,EAA+B;AAC7BP,MAAAA,MAAM,CAACD,OAAP,GAAiBM,cAAjB;AACD;AACF;;AAED,SAAOL,MAAP;AACD;;AAEM,SAASQ,cAAT,CACLvB,OADK,EAELwB,aAFK,EAGU;AACf,SAAOA,aAAP;AACD","sourcesContent":["/* @flow */\n\nimport {\n  SingleUserInput,\n  UsersResponse,\n  ModulesInject,\n} from '../../flow_interfaces';\nimport operationConstants from '../../constants/operations';\n\nexport function getOperation(): string {\n  return operationConstants.PNGetUserOperation;\n}\n\nexport function validateParams(modules: ModulesInject, incomingParams: SingleUserInput) {\n  let { userId } = incomingParams;\n\n  if (!userId) return 'Missing userId';\n}\n\nexport function getURL(\n  modules: ModulesInject,\n  incomingParams: SingleUserInput\n): string {\n  let { config } = modules;\n\n  return `/v1/objects/${config.subscribeKey}/users/${incomingParams.userId}`;\n}\n\nexport function getRequestTimeout({ config }: ModulesInject) {\n  return config.getTransactionTimeout();\n}\n\nexport function isAuthSupported() {\n  return true;\n}\n\nexport function getAuthToken(modules: ModulesInject, incomingParams: SingleUserInput): string {\n  let token =\n    modules.tokenManager.getToken('user', incomingParams.userId) ||\n    modules.tokenManager.getToken('user');\n\n  return token;\n}\n\nexport function prepareParams(\n  modules: ModulesInject,\n  incomingParams: SingleUserInput\n): Object {\n  let { include } = incomingParams;\n  const params = {};\n\n  // default to include custom fields in response\n  if (!include) {\n    include = {\n      customFields: true\n    };\n  } else if (include.customFields === undefined) {\n    include.customFields = true;\n  }\n\n  if (include) {\n    let includes = [];\n\n    if (include.customFields) {\n      includes.push('custom');\n    }\n\n    let includesString = includes.join(',');\n\n    if (includesString.length > 0) {\n      params.include = includesString;\n    }\n  }\n\n  return params;\n}\n\nexport function handleResponse(\n  modules: ModulesInject,\n  usersResponse: Object\n): UsersResponse {\n  return usersResponse;\n}\n"],"file":"get_user.js"}